var AsyncImage=function(a,b){"use strict";var c=function(c,d){var e=b(a),f=this,g={offset:{x:0,y:0},callbacks:{},binds:{},conditions:{visible:!1,within_bounds:!1},throttle:300,event_namespace:".async-image"},h=function(){var a;for(b.extend(g,d),f.selector=c,a=0;a<g.binds.length;a++)f.bind(g.binds[a])},i=function(a){var b=a[0].getBoundingClientRect();return b.top<e.height()-g.offset.y&&b.bottom>0&&b.left<e.width()-g.offset.x&&b.right>0},j=function(a){return 0!==a[0].offsetWidth*a[0].offsetHeight},k=function(a,b){var c=!0;return function(){c&&(c=!1,a.apply(this,arguments),setTimeout(function(){c=!0},b||g.throttle))}};this.update=function(){b(f.selector).each(function(){var a=b(this);return a.data("src")&&(!0!==g.conditions.within_bounds||i(a))&&(!0!==g.conditions.visible||j(a))?g.conditions.custom&&!g.conditions.custom.call(this)?!0:(a.attr("src",a.data("src")),a.off(g.event_namespace),void a.load(function(){b(this).removeData("src").removeAttr("data-src"),g.callbacks.load&&g.callbacks.load.call(this)}).error(function(){b(this).removeData("src").removeAttr("data-src"),g.callbacks.error&&g.callbacks.error.call(this)})):!0})},this.bind=function(a){b(a.target).on(a.type+g.event_namespace,k(function(){setTimeout(f.update,a.delay||0)},a.throttle))},this.onLoad=function(a){g.callbacks.load=a},this.onError=function(a){g.callbacks.error=a},h()};return{"new":function(a,b){return new c(a,b)},lazy:function(b){return new c(b,{binds:[{target:a,type:"scroll"}],conditions:{within_bounds:!0}})}}}(window,jQuery);